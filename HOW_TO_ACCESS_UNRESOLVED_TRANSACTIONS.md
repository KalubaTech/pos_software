# How to Access Unresolved Transactions

## Quick Answer

**Unresolved Transactions** appear in the **Subscription tab** of Settings, right below any payment status notifications and above your current subscription.

---

## Step-by-Step Access

### From Main Menu

```
1. Open App
   â†“
2. Navigate to Settings (âš™ï¸ icon)
   â†“
3. Click on "Subscription" tab (ğŸ‘‘ Crown icon) 
   â†“
4. Scroll down (if needed)
   â†“
5. See "Unresolved Transactions" section
   (Only appears if you have unresolved transactions)
```

---

## Visual Navigation

### Settings View Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                                       â”‚
â”‚  Manage your POS system configuration          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [System] [Business] [Appearance]          â”‚ â”‚
â”‚  â”‚     [Subscription] [Sync]   â† Click here â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  [Result Notification - if any]                â”‚
â”‚                                                 â”‚
â”‚  [Payment Checking Status - if checking]       â”‚
â”‚                                                 â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘ ğŸ• Unresolved Transactions          [2]  â•‘ â”‚ â† HERE!
â”‚  â•‘                                           â•‘ â”‚
â”‚  â•‘ These transactions could not be verified â•‘ â”‚
â”‚  â•‘ You can retry checking their status.     â•‘ â”‚
â”‚  â•‘                                           â•‘ â”‚
â”‚  â•‘ [Transaction Card 1]                      â•‘ â”‚
â”‚  â•‘ [Transaction Card 2]                      â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                 â”‚
â”‚  [Current Subscription Card - if any]          â”‚
â”‚                                                 â”‚
â”‚  [Choose Your Plan Section]                    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tab Bar Position

The Subscription tab is the **4th tab** (counting from left):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ System â”‚ Business â”‚ Appearance â”‚ Subscription â”‚ Sync â”‚
â”‚   âš™ï¸   â”‚    ğŸª    â”‚     ğŸ¨     â”‚      ğŸ‘‘      â”‚  â˜ï¸  â”‚
â”‚        â”‚          â”‚            â”‚   â† HERE!    â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

---

## When Does It Appear?

The **Unresolved Transactions** section is **conditionally displayed**:

### âœ… Shows When:
- You have at least 1 unresolved transaction
- Transaction status is: `pending`, `timeout`, or `notFound`
- Automatically appears after a payment times out

### âŒ Hidden When:
- No unresolved transactions exist
- All transactions have been resolved (completed/failed)
- Clean state (no payment issues)

---

## Real-World Example

### Scenario: You just initiated a payment that timed out

**Step 1:** Payment initiated
```
Payment Dialog â†’ Enter phone â†’ Click "Pay K500"
                                      â†“
                          Payment status checking...
                                      â†“
                          Status not found (25s timeout)
                                      â†“
                  Transaction saved to "Unresolved"
```

**Step 2:** Access unresolved transactions
```
You're automatically in Settings â†’ Subscription tab
                â†“
Scroll up slightly (notification might push it down)
                â†“
See "Unresolved Transactions" section
                â†“
Your transaction is there with [Retry] button
```

---

## UI Hierarchy (Top to Bottom)

```
Settings Header
   â†“
Tab Bar (5 tabs)
   â†“
Tab Content (Subscription):
   â”œâ”€ Result Notification (top, if active)
   â”œâ”€ Payment Checking Status (if checking)
   â”œâ”€ Unresolved Transactions â† YOUR TARGET
   â”œâ”€ Current Subscription Card
   â”œâ”€ Choose Your Plan
   â””â”€ Features Comparison
```

---

## Code Location

**File:** `lib/views/settings/subscription_view.dart`  
**Lines:** ~112-127

```dart
// Unresolved transactions section
Obx(() {
  if (subscriptionService.unresolvedTransactions.isNotEmpty) {
    return FadeInUp(
      duration: Duration(milliseconds: 300),
      child: Column(
        children: [
          _buildUnresolvedTransactionsSection(
            subscriptionService,
            businessController,
            isDark,
          ),
          SizedBox(height: 24),
        ],
      ),
    );
  }
  return SizedBox.shrink(); // Hidden if no unresolved
}),
```

---

## Quick Access Path

### Desktop/Tablet:
```
Main App â†’ Settings (sidebar) â†’ Subscription Tab â†’ Scroll to Unresolved
```

### Mobile:
```
Main App â†’ Menu â†’ Settings â†’ Subscription Tab â†’ Scroll to Unresolved
```

---

## How to Know If You Have Unresolved Transactions?

### Indicators:

1. **Badge Counter:** 
   - If visible in future updates: "Unresolved Transactions [2]"
   - Shows count of pending transactions

2. **After Payment Timeout:**
   - You'll see notification: "Transaction Saved"
   - Message says: "saved to 'Unresolved Transactions'"
   - Section automatically appears

3. **Observable in Code:**
   ```dart
   subscriptionService.unresolvedTransactions.length > 0
   ```

---

## Testing Access

### To test if you can access it:

1. Go to Settings
2. Click "Subscription" tab (4th tab, crown icon ğŸ‘‘)
3. Look for orange section with clock icon ğŸ•
4. Should say "Unresolved Transactions" at top

### If you don't see it:
- âœ… Good! You have no unresolved transactions
- Everything is working normally
- Section only appears when needed

### To create a test unresolved transaction:
1. Initiate a payment
2. Let it timeout (don't approve on phone)
3. Wait 25 seconds for polling to complete
4. Section will appear automatically

---

## Position Summary

| Element | Position | Always Visible? |
|---------|----------|-----------------|
| Result Notification | Top | No (when active) |
| Payment Checking | Below notification | No (when checking) |
| **Unresolved Transactions** | **Below checking** | **No (when exist)** |
| Current Subscription | Below unresolved | Yes (if subscribed) |
| Choose Your Plan | Below subscription | Yes |
| Features Comparison | Bottom | Yes |

---

## Important Notes

âš ï¸ **Section is dynamic** - Only appears when you have unresolved transactions

âœ… **Auto-appears** - When payment times out, section automatically shows

âœ… **Auto-hides** - When all transactions resolved, section disappears

âœ… **Persistent** - Survives app restarts (saved in database)

âœ… **Real-time** - Updates immediately when transactions added/removed

---

## Alternative Access (Future Enhancement)

### Could be added:
- Dashboard notification badge
- Quick access button in header
- Push notification when transaction ready
- Shortcut from payment failure dialog

### Currently:
- Only accessible through Settings â†’ Subscription tab

---

## Summary

**Where:** Settings â†’ Subscription Tab  
**Position:** Below status cards, above current subscription  
**Visibility:** Only when unresolved transactions exist  
**Icon:** ğŸ• Clock icon  
**Badge:** Shows count [X]  

**Path:** `Main App â†’ Settings â†’ Subscription Tab â†’ Unresolved Transactions`

---

## Quick Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Settings                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [System][Business][Appearance]      â”‚
â”‚     [Subscription â† HERE][Sync]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ ğŸ• Unresolved Transactions [2] â†â”€â”€â”€â”€â”¤ YOU ARE HERE
â”‚    Retry checking these...          â”‚
â”‚                                     â”‚
â”‚    [Transaction 1 with Retry]       â”‚
â”‚    [Transaction 2 with Retry]       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Created:** November 15, 2025  
**Status:** âœ… Feature Active and Accessible
